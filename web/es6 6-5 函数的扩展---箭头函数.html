<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>函数的扩展---箭头函数</title>
</head>

<body>
    <script type="text/javascript">
    function show(arr) {
        console.log("");
        arr.forEach(function(key, i) {
            console.log(i + "", key);
        });
        console.log("");
    }




    /**
     * 箭头函数（自己总结）
     *
     * ES6 允许使用“箭头”（=>）定义函数。
     *
     * (参数1,参数2,...) => {函数体}
     * (参数1,参数2,...) => 返回值
     * () => {函数体}
     * () => 返回值
     *
     * 如果参数只有一个 可以不加 括号
     * 参数 => {函数体}
     * 参数 => 返回值
     *
     * 如果返回值是一个对象{}的时候
     * ([参数1[,参数2,...]]) => (对象返回值)
     * 参数 => (对象返回值)
     *
     * render: x => x(App)
     * render: (x) => x(App)
     * render: (x) => {return x(App)}
     * render:function(x){
        return x(App);
       }
     */



     /*

        (param1, param2, …, paramN) => { statements }
        (param1, param2, …, paramN) => expression
        //相当于：(param1, param2, …, paramN) =>{ return expression; }


        // 当只有一个参数时，圆括号是可选的：
        (singleParam) => { statements }
        singleParam => { statements }


        // 没有参数的函数应该写成一对圆括号。
        () => { statements }


        https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions
     */
    {
        var f = v => v;
        // 等同于
        var f = function(v) {
            return v;
        };
    } {
        // 如果箭头函数不需要参数或需要多个参数，就使用一个圆括号代表参数部分。
        var f = () => 5;
        // 等同于
        var f = function() {
            return 5
        };

        var sum = (num1, num2) => num1 + num2;
        // 等同于
        var sum = function(num1, num2) {
            return num1 + num2;
        };
    } {
        // 如果箭头函数的代码块部分多于一条语句(或者不想要返回值的时候)，就要使用大括号将它们括起来，并且使用return语句返回。
        var sum = (num1, num2) => { return num1 + num2;}
            // 等同于
        var sum = function(num1, num2) {
            return num1 + num2;
        }
    }{
        // 由于大括号被解释为代码块，所以如果箭头函数直接返回一个对象，必须在对象外面加上括号。
        var getTempItem = id => ({ id: id, name: "Temp" });
    }{
        var full = ({ first, last }) => first + ' ' + last;

        // 等同于
        var full = function({ first, last }) {
            return first + ' ' + last;
        }
        // 等同于
        var full = function(person) {
            return person.first + ' ' + person.last;
        }
    }
    // 箭头函数的应用
    {
        // 1.箭头函数使得表达更加简洁。
        const isEven = n => n % 2 == 0;
        const square = n => n * n;
        show([
            isEven(1), // false
            square(2) // 4
        ]);

        // 2.简化回调函数
        // 正常函数写法
        [1,2,3].map(function (x) {
            return x * x;
        });

        // 箭头函数写法
        [1,2,3].map(x => x * x);

        // 正常函数写法
        var result = [1,2,6,4,7,4,9,1,10].sort(function (a, b) {
            return a - b;
        });

        // 箭头函数写法
        var result = [1,2,6,4,7,4,9,1,10].sort((a, b) => a - b);
    }

    </script>
</body>

</html>
